"use strict";(function(t,s){var e=Object.create(HTMLElement.prototype);Object.defineProperty(e,"observedAttributes",{value:["gap","column-gap","row-gap","inline","columns","rows","auto-rows","auto-columns","auto-flow","align-self","justify-self"]}),Object.defineProperty(e,"gridAttributes",{value:{gridColumnStart:"data-grid-column-start",gridColumnEnd:"data-grid-column-end",gridRowStart:"data-grid-row-start",gridRowEnd:"data-grid-row-end"}}),Object.defineProperty(e,"msGridAttributes",{value:{msGridColumn:"data-grid-column-start",msGridColumnSpan:"data-grid-column-end",msGridRow:"data-grid-row-start",msGridRowSpan:"data-grid-row-end"}}),e._detectGridSupport=function(){var t=document.createElement("div");return"string"==typeof t.style.grid?"grid":(t.style.msGridColumn,"msGrid")},e._getState=function(t,s){var e=this;return t?void(this.state[t]=this._attributeValidation(t,s)):void this.observedAttributes.map(function(t){e.state[t]=e._attributeValidation(t,e.getAttribute(t))})},e._attributeValidation=function(t,s){switch(t){case"columns":case"rows":if("grid"===this.support)return/^\d+$/g.test(s)?"repeat("+s+", 1fr)":s;for(var e=parseInt(s,10),i=[],r=1;r<=e;r++)i.push("1fr");return i.join(" ");case"auto-flow":return/^((row|column) ?)?(dense)?$/.test(s)?s:"row";default:return s}},e._setStyles=function(){if(null==this.support)throw new Error("No CSS support");return"msGrid"===this.support?void this._setLegacyStyles():(this.style.display=this.hasAttribute("inline")?"inline-grid":"grid",this.state.columns&&(this.style.gridTemplateColumns=this.state.columns),this.state.rows&&(this.style.gridTemplateRows=this.state.rows),this.state["auto-columns"]&&(this.style.gridAutoColumns=this.state["auto-columns"]),this.state["auto-rows"]&&(this.style.gridAutoRows=this.state["auto-rows"]),this.state.gap?this.style.gridGap=this.state.gap:(this.state["row-gap"]&&(this.style.gridRowGap=this.state["row-gap"]),this.state["column-gap"]&&(this.style.gridColumnGap=this.state["column-gap"])),void(this.state["auto-flow"]&&(this.style.gridAutoFlow=this.state["auto-flow"])))},e._setLegacyStyles=function(){this.style.display=this.hasAttribute("inline")?"-ms-inline-grid":"-ms-grid",this.state.columns&&(this.style.msGridColumns=this.state.columns),this.state.rows&&(this.style.msGridRows=this.state.rows),this.state["align-self"]&&(this.style.msGridRowAlign=this.state["align-self"]),this.state["justify-self"]&&(this.style.msGridColumnAlign=this.state["justify-self"])},e._setObserver=function(){var t=this;this.childObserver=new MutationObserver(function(s){var e=[];s.forEach(function(s){"attributes"===s.type&&s.target.parentNode===t&&e.push(s.target)}),e.forEach(function(s){t._setChildAttributes(s)})});var s={attributes:!0,childList:!0,attributeFilter:Object.keys(this.gridAttributes).map(function(s){return t.gridAttributes[s]}),subtree:!0,attributeOldValue:!1},e=Object.keys(this.gridAttributes);Array.from(this.children).filter(function(t){var s=Object.keys(t.dataset);return e.filter(function(t){return s.indexOf(t)>-1}).length>0}).forEach(function(s){t._setChildAttributes(s)}),this.childObserver.observe(this,s)},e._setChildAttributes=function(t){if(t){if("msGrid"===this.support)return void this._setMsGridChildAttributes(t);var s=t.dataset;Object.keys(this.gridAttributes).forEach(function(e){t.style[e]=s[e]||""})}},e._setMsGridChildAttributes=function(t){var s=this;if(t){var e=t;Object.keys(this.msGridAttributes).forEach(function(t){var i=e.getAttribute(s.msGridAttributes[t]);if(null!=i)if("Span"===t.substr(-4)){var r=t.substr(0,t.length-4),a=s.msGridAttributes[r],o=parseInt(e.getAttribute(a)||"1",10),n=parseInt(i,10)||o;e.style[t]=(n-o).toString()||"1"}else e.style[t]=i||""})}},e.createdCallback=function(){this.support=this._detectGridSupport(),this.state={}},e.attachedCallback=function(){this._getState(),this._setStyles(),this._setObserver()},e.detachedCallback=function(){this.childObserver&&this.childObserver.disconnect()},e.attributeChangedCallback=function(t,s,e){this.observedAttributes.indexOf(t)!==-1&&(this._getState(t,e),this._setStyles())};document.registerElement("grid-layout",{prototype:e})})(window,document);